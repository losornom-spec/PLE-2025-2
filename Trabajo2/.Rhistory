"Fuerza de trabajo.CSV"
),
sep = ";"
)
View(FuerzaTrabajo)
x <- c(130, 142, 128, 136, 125, 145, 133, 137, 131, 139, 127, 141)
mean(x)
sd(x)
qt(0.025, 11)
mean(x)+qt(0.025, 11)*(sd(x)/sqrt(12))
mean(x)-qt(0.025, 11)*(sd(x)/sqrt(12))
qnorm(0.05)
1.27-1.24+qnorm(0.05)*sqrt(((0.5**2)/36)+((0.45)/40))
1.27-1.24+qnorm(0.05)*sqrt(((0.5**2)/36)+((0.45**2)/40))
(10*(0.45**2)+8*(0.58**2))/(18)
sp2 <- (10*(0.45**2)+8*(0.58**2))/(18)
qt(0.025, 18)
3.12-2.74+qt(0.025, 18)*sqrt(sp2*(1/11+1/9))
3.12-2.74-qt(0.025, 18)*sqrt(sp2*(1/11+1/9))
pf(0.213, 19, 24)
qf(0.05, 19, 24)
1/qf(0.05/2, 24, 19)
qf(0.05/2, 19, 24)
x <- c(130, 142, 128, 136, 125, 145, 133, 137, 131, 139, 127, 141)
mean(x)
sd(x)
qt(0.05/2, 11)
mean(x)+qt(0.05/2, 11)*(sd(x)/sqrt(12))
mean(x)-qt(0.05/2, 11)*(sd(x)/sqrt(12))
qnorm(0.05)
1.27-1.24+qnorm(0.05)*sqrt(((0.5**2)/36+(0.45**2)/40))
1.27-1.24+qnorm(0.05)*sqrt((((0.5**2)/36)+((0.45**2)/40)))
qt(0.05/2, 18)
sp2 <- (10*(0.45**2)+8*(0.58**2))/(18)
sp2
3.12-2.74+qt(0.05/2, 18)*sqrt(sp2)*sqrt(1/11+1/9)
3.12-2.74-qt(0.05/2, 18)*sqrt(sp2)*sqrt(1/11+1/9)
ComposicionHogar <- read.csv(
file = unz(
r"(datos\Caracteristicas y composicion del hogar.zip)",
"Caracter\xa1sticas y composici\xa2n del hogar.CSV"
),
sep = ";"
)
FuerzaTrabajo <- read.csv(
file = unz(
r"(datos\Fuerza de trabajo.zip)",
"Fuerza de trabajo.CSV"
),
sep = ";"
)
# librerias usadas
library(dplyr)
library(ggplot2)
library(maps)
library(sf)
library(leaflet)
# librerias usadas
library(tidyverse)
library(ggplot2)
library(maps)
library(sf)
library(leaflet)
View(ComposicionHogar)
Conteo_familia <- ComposicionHogar %>%
# Agrupa los datos por directorio
group_by(DIRECTORIO) %>%
# Conteo de filas por familia
summarise(
Num_Individuos = n()
) %>%
ungroup()
desc(Conteo_familia$Num_Individuos)
desc(Conteo_familia$Num_Individuos)
desc::desc(Conteo_familia$Num_Individuos)
# Calcular el número de individuos por hogar
Conteo_familia <- ComposicionHogar %>%
# Agrupa los datos por directorio
group_by(DIRECTORIO) %>%
# Conteo de filas por familia
summarise(
Num_Individuos = n()
) %>%
ungroup()
# Promedio y Desviación Estándar
estadisticos <- Conteo_familia %>%
summarise(
Promedio = mean(Num_Individuos),
Desv_Estandar = sd(Num_Individuos),
Mediana = median(Num_Individuos)
)
estadisticos
ggplot(Conteo_familia, aes(x = "", y = Num_Individuos)) +
geom_boxplot(fill = "#66CDAA", color = "darkblue") +
geom_point(data = data.frame(y = estadisticos$Promedio), aes(x = "", y = y), color = "red", size = 3) +
labs(
title = "Boxplot del Número de Individuos por Hogar",
y = "Número de Individuos",
x = ""
)
ggplot(Conteo_familia, aes(x = Num_Individuos)) +
geom_histogram(binwidth = 1, fill = "seagreen", color = "black") +
labs(
title = "Histograma del Número de Individuos por Hogar",
x = "Número de Individuos",
y = "Frecuencia (Número de Hogares)"
)
Ingreso_mensual <- FuerzaTrabajo %>%
group_by(DIRECTORIO) %>%
# Suma de los ingresos por empleo para cada hogar
summarise(
Ingreso_hogar = sum(P8624,na.rm = TRUE)
) %>%
ungroup()
estadisticos2 <- Ingreso_mensual %>%
summarise(
Promedio = mean(Ingreso_hogar),
Desv_Estandar = sd(Ingreso_hogar),
)
estadisticos2
# hay datos outlier incluso uno que alcanza 131.300.000
# se deberia definir un limite ya que esto impide visualizar el resto de información
datos_sin_outliers <- Ingreso_mensual %>%
filter(Ingreso_hogar <= 5000000)
ggplot(datos_sin_outliers, aes(x = "", y = Ingreso_hogar)) +
geom_boxplot(fill = "#66CDAA", color = "darkblue") +
geom_point(data = data.frame(y = estadisticos2$Promedio), aes(x = "", y = y), color = "red", size = 3) +
labs(
title = "Boxplot los ingresos mensuales por hogar",
y = "Ingresos mensuales",
x = ""
)
ggplot(datos_sin_outliers, aes(x = Ingreso_hogar)) +
geom_histogram(fill = "seagreen", color = "black") +
labs(
title = "Histograma de los ingresos mensuales por hogar",
x = "Ingresos mensuales",
y = "Frecuencia (Número de Hogares)"
)
View(FuerzaTrabajo)
Datos_unidos <- inner_join(Conteo_familia, datos_sin_outliers, by = "DIRECTORIO")
ggplot(Datos_unidos, aes(x = Num_Individuos, y = Ingreso_hogar)) +
geom_point(color = "darkblue", size = 2) +
# línea de tendencia
geom_smooth(method = "lm", se = FALSE, color = "red", linetype = "dashed") +
labs(
title = "Relación entre Ingreso del Hogar y Número de Individuos",
x = "Número de Individuos por Hogar",
y = "Ingreso Mensual Total por Hogar"
)
require(tidyverse)
require(magrittr)
link %>% readLines()
link <- r"(C:\Users\Victus\Downloads\Delito_Hurto_Motocicletas.csv)"
link %>% readLines()
link %>% readLines() %>% gsub('^"(.*?)"$', "\\1", .)
link %>% readLines() %>% gsub('^"(.*?)"$', "\\1", .) %>% gsub('""', '"', .)
link %>% readLines() %>% gsub('^"(.*?)"$', "\\1", .) %>% gsub('""', '"', .) %>%
I() %>% read_csv()
datos <- link %>% readLines() %>% gsub('^"(.*?)"$', "\\1", .) %>% gsub('""', '"', .) %>%
I() %>% read_csv()
View(datos)
hurtos <- link %>% readLines() %>% gsub('^"(.*?)"$', "\\1", .) %>% gsub('""', '"', .) %>%
I() %>% read_csv()
hurtos %>% View()
rm(list = ls())
ComposicionHogar <- read.csv(
file = unz(
r"(datos\Caracteristicas y composicion del hogar.zip)",
"Caracter\xa1sticas y composici\xa2n del hogar.CSV"
),
sep = ";"
)
FuerzaTrabajo <- read.csv(
file = unz(
r"(datos\Fuerza de trabajo.zip)",
"Fuerza de trabajo.CSV"
),
sep = ";"
)
# librerias usadas
library(tidyverse)
library(dplyr)
library(ggplot2)
library(plotly)
library(maps)
library(sf)
library(leaflet)
library(magrittr)
library(geodata)
# Calcular el número de individuos por hogar
Conteo_Hogar <- ComposicionHogar %>%
group_by(DIRECTORIO, SECUENCIA_P) %>%
summarise(Num_Individuos = n()) %>%
ungroup()
# Promedio y Desviación Estándar
EstadisticosHogar <- Conteo_Hogar %>%
summarise(
Promedio = mean(Num_Individuos),
Desv_Estandar = sd(Num_Individuos),
Mediana = median(Num_Individuos)
)
EstadisticosHogar
p0 <- ggplot(Conteo_Hogar, aes(x = "", y = Num_Individuos)) +
geom_boxplot(fill = "#66CDAA", color = "darkblue") +
geom_point(data = data.frame(y = EstadisticosHogar$Promedio), aes(x = "", y = y), color = "red", size = 3) +
labs(
title = "Boxplot del Número de Individuos por Hogar",
y = "Número de Individuos",
x = ""
)
ggplotly(p0)
p1 <- ggplot(Conteo_Hogar, aes(x = Num_Individuos)) +
geom_histogram(binwidth = 1, fill = "seagreen", color = "black") +
labs(
title = "Histograma del Número de Individuos por Hogar",
x = "Número de Individuos",
y = "Frecuencia (Número de Hogares)"
)
ggplotly(p1)
# Se crea una nueva variable llamada IngresoMensual
FuerzaTrabajo %<>%
rowwise() %>%
mutate(IngresoMensual=sum(P8624,P6595S1,P6605S1, P6623S1,P8626S1, P8628S1, P8630S1,
P8631S1, P1087S1A1/12, P1087S2A1/12, P1087S3A1/12, P1087S4A1,
P1087S5A1, P6750, P8636S1, P8640S1, P8642S1, P8644S1, P8646S1,
P8648S1/12, P8650S1A1/12, P8652S1/12, P8654S1/12, na.rm = TRUE)) %>%
ungroup()
Ingreso_mensual <- FuerzaTrabajo %>%
group_by(DIRECTORIO, SECUENCIA_P) %>%
summarise(Ingreso_hogar = sum(IngresoMensual,na.rm = TRUE)) %>%
ungroup()
Ingreso_mensual %<>%
filter(Ingreso_hogar <= 10000000)
EstadísticosHogar <- Ingreso_mensual %>%
summarise(
Promedio = mean(Ingreso_hogar),
Desv_Estandar = sd(Ingreso_hogar),
Q1 = quantile(Ingreso_hogar, 0.25),
Mediana = median(Ingreso_hogar),
Q3 = quantile(Ingreso_hogar, 0.75),
Q_0.9 = quantile(Ingreso_hogar, 0.9)
)
EstadísticosHogar
p2<- ggplot(Ingreso_mensual, aes(x = "", y = Ingreso_hogar)) +
geom_boxplot(fill = "#66CDAA", color = "darkblue") +
geom_point(data = data.frame(y = EstadísticosHogar$Promedio), aes(x = "", y = y), color = "red", size = 3) +
labs(
title = "Boxplot los ingresos mensuales por hogar",
y = "Ingresos mensuales",
x = ""
)
ggplotly(p2)
p3 <- ggplot(Ingreso_mensual, aes(x = Ingreso_hogar)) +
geom_histogram(fill = "seagreen", color = "black") +
labs(
title = "Histograma de los ingresos mensuales por hogar",
x = "Ingresos mensuales",
y = "Frecuencia (Número de Hogares)"
)
ggplotly(p3)
Datos_unidos <- inner_join(Conteo_Hogar, Ingreso_mensual, by = "DIRECTORIO")
ggplot(Datos_unidos, aes(x = Num_Individuos, y = Ingreso_hogar)) +
geom_point(color = "darkblue", size = 2) +
labs(
title = "Relación entre Ingreso del Hogar y Número de Individuos",
x = "Número de Individuos por Hogar",
y = "Ingreso Mensual Total por Hogar"
)
Colombia <- gadm(country = "COL", level = 1, path = tempdir()) %>%  st_as_sf()
qf(0.025, 24, 19)
1/qf(0.025, 24, 19)
qf(0.025, 19, 24)
qf(0.025, 19, 24, lower.tail = FALSE)
1/qf(0.025, 24, 19, lower.tail = FALSE)
qt(0.025, 42)
qt(0.025, 43)
qt(1-0.025, 43)
1+2
library(installr)
updateR()
updateR()
updateR()
library(installr)
updateR()
updateR()
updateR()
updateR(
fast = FALSE,
browse_news = TRUE,
install_R = TRUE,
copy_package = FALSE,
copy_Rprofile.site = TRUE,
keep_old_packages = FALSE,
update_packages = TRUE
)
updateR(
fast = FALSE,
browse_news = TRUE,
install_R = TRUE,
copy_package = FALSE,
copy_Rprofile.site = TRUE,
keep_old_packages = FALSE,
update_packages = TRUE
)
warnings()
update.packages(ask = FALSE, checkBuilt = TRUE)
rm(list = ls())
ComposicionHogar <- read.csv(
file = unz(
r"(datos\Caracteristicas y composicion del hogar.zip)",
"Caracter\xa1sticas y composici\xa2n del hogar.CSV"
),
sep = ";"
)
FuerzaTrabajo <- read.csv(
file = unz(
r"(datos\Fuerza de trabajo.zip)",
"Fuerza de trabajo.CSV"
),
sep = ";"
)
Servicios_Hogar <- read.csv(
file = unz(
r"(datos\Servicios_del_hogar.zip)",
"Servicios del hogar.CSV"
),
sep = ";"
)
Salud <- read.csv(
file = r"(datos\Salud.CSV)",
sep = ";"
)
# librerias usadas
library(tidyverse)
library(dplyr)
library(ggplot2)
library(plotly)
library(maps)
library(sf)
library(leaflet)
library(magrittr)
library(geodata)
# Calcular el número de individuos por hogar
Conteo_Hogar <- ComposicionHogar %>%
group_by(DIRECTORIO, SECUENCIA_P) %>%
summarise(Num_Individuos = n()) %>%
ungroup()
# Promedio y Desviación Estándar
EstadisticosHogar <- Conteo_Hogar %>%
summarise(
Promedio = mean(Num_Individuos),
Desv_Estandar = sd(Num_Individuos),
Mediana = median(Num_Individuos)
)
EstadisticosHogar
ggplot(Conteo_Hogar, aes(x = "", y = Num_Individuos)) +
geom_boxplot(fill = "#66CDAA", color = "darkblue") +
geom_point(data = data.frame(y = EstadisticosHogar$Promedio), aes(x = "", y = y), color = "red", size = 3) +
labs(
title = "Boxplot del Número de Individuos por Hogar",
y = "Número de Individuos",
x = ""
)
ggplot(Conteo_Hogar, aes(x = Num_Individuos)) +
geom_histogram(binwidth = 1, fill = "seagreen", color = "black") +
labs(
title = "Histograma del Número de Individuos por Hogar",
x = "Número de Individuos",
y = "Frecuencia (Número de Hogares)"
)
# Se crea una nueva variable llamada IngresoMensual
FuerzaTrabajo %<>%
rowwise() %>%
mutate(IngresoMensual=sum(P8624,P6595S1,P6605S1, P6623S1,P8626S1, P8628S1, P8630S1,
P8631S1, P1087S1A1/12, P1087S2A1/12, P1087S3A1/12, P1087S4A1,
P1087S5A1, P6750, P8636S1, P8640S1, P8642S1, P8644S1, P8646S1,
P8648S1/12, P8650S1A1/12, P8652S1/12, P8654S1/12, na.rm = TRUE)) %>%
ungroup()
Ingreso_mensual <- FuerzaTrabajo %>%
group_by(DIRECTORIO, SECUENCIA_P) %>%
summarise(Ingreso_hogar = sum(IngresoMensual,na.rm = TRUE)) %>%
ungroup()
Ingreso_mensual %<>%
filter(Ingreso_hogar <= 10000000)
EstadísticosHogar <- Ingreso_mensual %>%
summarise(
Promedio = mean(Ingreso_hogar),
Desv_Estandar = sd(Ingreso_hogar),
Q1 = quantile(Ingreso_hogar, 0.25),
Mediana = median(Ingreso_hogar),
Q3 = quantile(Ingreso_hogar, 0.75),
Q_0.9 = quantile(Ingreso_hogar, 0.9)
)
EstadísticosHogar
ggplot(Ingreso_mensual, aes(x = "", y = Ingreso_hogar)) +
geom_boxplot(fill = "#66CDAA", color = "darkblue") +
geom_point(data = data.frame(y = EstadísticosHogar$Promedio), aes(x = "", y = y), color = "red", size = 3) +
labs(
title = "Boxplot los ingresos mensuales por hogar",
y = "Ingresos mensuales",
x = ""
)
ggplot(Ingreso_mensual, aes(x = Ingreso_hogar)) +
geom_histogram(fill = "seagreen", color = "black") +
labs(
title = "Histograma de los ingresos mensuales por hogar",
x = "Ingresos mensuales",
y = "Frecuencia (Número de Hogares)"
)
Datos_unidos <- inner_join(Conteo_Hogar, Ingreso_mensual, by = "DIRECTORIO")
ggplot(Datos_unidos, aes(x = Num_Individuos, y = Ingreso_hogar)) +
geom_point(color = "darkblue", size = 2) +
labs(
title = "Relación entre Ingreso del Hogar y Número de Individuos",
x = "Número de Individuos por Hogar",
y = "Ingreso Mensual Total por Hogar"
)
# Se carga el mapa de Colombia por departamentos, tarda unos segundos (length 5465174 bytes (5.2 MB))
Colombia <- gadm(country = "COL", level = 1, path = tempdir()) %>%  st_as_sf()
Ingreso_mensual <- inner_join(x = Ingreso_mensual, y = ComposicionHogar[, c("DIRECTORIO", "P756S1", "SECUENCIA_P", "P756S2")],
by= join_by(DIRECTORIO, SECUENCIA_P)) %>% remove_missing() %>% distinct()
Ingreso_mensual$P756S1 <- as.factor(Ingreso_mensual$P756S1)
IngresoDepartamento <- Ingreso_mensual %>%
group_by(P756S1) %>%
summarise(Promedio_Dep = mean(Ingreso_hogar)) %>%
ungroup()
cuantiles <- quantile(IngresoDepartamento$Promedio_Dep, c(0,  0.25, 0.5, .75, 1))
cuantiles[1] <- cuantiles[1]-0.01
IngresoDepartamento$Color <- cut(IngresoDepartamento$Promedio_Dep,
breaks =cuantiles,
labels = c("#A50021", "#FFAD72", "#72D9FF", "#290AD8"))
# Crear vectores para el Código y el Nombre
Codigo_DANE <- c(
"5", "8", "11", "13", "15", "17", "18", "19", "20", "23", "25", "27",
"41", "44", "47", "50", "52", "54", "63", "66", "68", "70", "73", "76",
"81", "85", "86", "88", "91", "94", "95", "97", "99"
)
Nombre_Departamento <- c(
"ANTIOQUIA", "ATLÁNTICO", "BOGOTÁ, D.C.", "BOLÍVAR", "BOYACÁ", "CALDAS",
"CAQUETÁ", "CAUCA", "CÉSAR", "CÓRDOBA", "CUNDINAMARCA", "CHOCÓ",
"HUILA", "LA GUAJIRA", "MAGDALENA", "META", "NARIÑO", "NORTE DE SANTANDER",
"QUINDÍO", "RISARALDA", "SANTANDER", "SUCRE", "TOLIMA", "VALLE DEL CAUCA",
"ARAUCA", "CASANARE", "PUTUMAYO", "SAN ANDRÉS, PROVIDENCIA Y SANTA CATALINA",
"AMAZONAS", "GUAINÍA", "GUAVIARE", "VAUPÉS", "VICHADA"
)
# Crear el data frame
deptos_colombia <- data.frame(
Codigo_DANE = Codigo_DANE,
Nombre_Departamento = str_to_title(Nombre_Departamento),
stringsAsFactors = FALSE
)
IngresoDepartamento <- full_join(IngresoDepartamento, deptos_colombia, by = c("P756S1" = "Codigo_DANE"))
IngresoDepartamento$Nombre_Departamento <- recode(IngresoDepartamento$Nombre_Departamento,
"Bogotá, D.c." = "Bogotá D.C.",
"César" = "Cesar",
"Norte De Santander"="Norte de Santander",
"Valle Del Cauca"="Valle del Cauca",
"San Andrés, Providencia Y Santa Catalina" = "San Andrés y Providencia")
IngresoDepartamento <- full_join(Colombia, IngresoDepartamento, by = c("NAME_1" = "Nombre_Departamento"))
# Crear etiquetas para la leyenda
IngresoDepartamento %>%
leaflet() %>%
addTiles() %>%
addPolygons(
fillColor = ~Color,
color = "black",
weight = 1,
fillOpacity = 0.5,
popup = paste0("Ingreso Promedio Mensual por Hogar: COP ", round(IngresoDepartamento$Promedio_Dep,2))
) %>%
addLegend(
position = "bottomright",
colors = c("#A50021", "#FFAD72", "#72D9FF", "#290AD8"),
labels = c("Q1 (Menor a 25%)", "Q2 (25% - 50%)", "Q3 (50% - 75%)", "Q4 (Mayor a 75%)"),
title = "Ingreso Promedio Mensual por Hogar (COP)"
)
# Se crea el mapa del Meta
Municipios <- gadm(country = "COL", level = 2, path = tempdir()) %>%
st_as_sf() %>%
filter(NAME_1 == "Meta")
Ingresos_Hogar_Meta <- Ingreso_mensual %>% filter(P756S1 == "50") %>%
group_by(DIRECTORIO, SECUENCIA_P) %>%
summarise(Ingreso_hogar = sum(Ingreso_hogar))
Ingresos_Hogar_Meta <- full_join(x= Ingresos_Hogar_Meta, y= Ingreso_mensual,
by= join_by(DIRECTORIO, SECUENCIA_P)) %>% remove_missing() %>% distinct()
library(rvest)
library(tidyverse)
url_meta <- "https://co.wikimedia.org/wiki/Municipios/Meta"
codigo_municipio_META <-  url_meta %>%
read_html() %>%
html_table() %>%
.[[1]] %>%
str_to_title(., Municipio)
codigo_municipio_META$Municipio <- str_to_title(codigo_municipio_META$Municipio)
codigo_municipio_META$Municipio <- str_to_title(codigo_municipio_META$Municipio)
codigo_municipio_META <-  url_meta %>%
read_html() %>%
html_table() %>%
.[[1]]
codigo_municipio_META$Municipio <- str_to_title(codigo_municipio_META$Municipio)
View(codigo_municipio_META)
# Se crea el mapa del Meta
Municipios <- gadm(country = "COL", level = 2, path = tempdir()) %>%
st_as_sf() %>%
filter(NAME_1 == "Meta")
library(sf)
library(geodata)
# Se crea el mapa del Meta
Municipios <- gadm(country = "COL", level = 2, path = tempdir()) %>%
st_as_sf() %>%
filter(NAME_1 == "Meta")
